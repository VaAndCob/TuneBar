# TuneBar

TuneBar is a feature-rich media player powered by the ESP32-S3 microcontroller. It combines high-quality audio playback with a modern, touch-screen interface to deliver a complete desktop companion experience.

## Features

*   **Internet Radio**: Stream online radio stations via WiFi.
*   **Hi-Res Audio Player**: Supports playback of MP3, FLAC, and AAC audio formats.
*   **Weather Station**: Real-time weather condition display.
*   **Digital Clock**: Precise timekeeping and display.
*   **Interactive UI**: A smooth, responsive graphical user interface built with [LVGL](https://lvgl.io/), designed using SquareLine Studio.


## Hardware Specifications

*   **Microcontroller**: ESP32-S3 (e.g., DevKitC-1)
*   **Audio Codec**: ES8311 (I2S Interface)
*   **Display**: LCD/TFT Screen compatible with LVGL
*   **Connectivity**: WiFi (for Radio and Weather)

## Project Structure

This project is built using PlatformIO.

*   `sketch/src/`: Main source code.
*   `sketch/src/es8311/`: Custom driver for the ES8311 audio codec.
*   `sketch/src/ui/`: User Interface code generated by SquareLine Studio.

## Getting Started

### Prerequisites

*   PlatformIO (VSCode Extension recommended)
*   ESP32-S3 Board Support Package

### Installation

1.  Clone this repository.
2.  Open the `sketch` folder in PlatformIO.
3.  PlatformIO should automatically install the required dependencies (LVGL, ArduinoJson, etc.) based on the configuration.
4.  Build and upload the firmware to your ESP32-S3 device.

### Configuration

Before compiling, ensure you have configured:
*   WiFi Credentials (SSID and Password).
*   API Keys for weather services (if applicable).

## Radio Stations (SD Card)

To manage your radio station list, you can create a `station.csv` file and upload it via the SD card.

### CSV Format
The file should contain one station per line in the format: `Station Name,URL`.

**Example `station.csv`:**
```csv
BBC Radio 1,http://stream.live.vc.bbcmedia.co.uk/bbc_radio_one
Smooth Chill,http://media-the.musicradio.com/SmoothChillMP3
```

### How to Upload
1.  Create the `station.csv` file on your computer.
2.  Copy the file to the root directory of a FAT32 formatted microSD card.
3.  Insert the SD card into the TuneBar device.
4.  Restart the device to load the stations.

## Development Notes

### UI Modification (SquareLine Studio)

If you modify the interface using SquareLine Studio:
1.  Export the project to `sketch/src/ui`.
2.  **Important**: As noted in `IMPORTANT.txt`, you must edit `sketch/src/ui/ui.c` after export. Comment out the lines related to `imgset` to prevent compilation errors:
    ```c
    //PropertyAnimation_0_user_data->imgset = (lv_img_dsc_t **)ui_imgset_;
    //PropertyAnimation_0_user_data->imgset_size = sizeof(ui_imgset_)/(sizeof(lv_img_dsc_t*));
    ```
3.  **Fonts**: To add support for other languages (e.g., Thai), copy the generated font `.c` files to `sketch/src/ui`.

## License

This project uses open-source libraries. Please refer to the specific license files for LVGL, ArduinoJson, and the ES8311 driver.